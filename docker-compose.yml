version: "3"

services:

  # UKWA Heritrix
  heritrix-worker:
    image: ukwa/heritrix-worker
    environment:
      - "JAVA_OPTS=-Xmx2g"
      - "CLAMD_HOST=clamd"
      - "KAFKA_BOOTSTRAP_SERVERS=kafka:9092"
      - "KAFKA_CRAWLED_TOPIC=frequent-crawl-log"
      - "KAFKA_TOCRAWL_TOPIC=uris-to-crawl"
      - "WRENDER_ENDPOINT=http://wrender:8010/render"
      - "CDXSERVER_ENDPOINT=http://cdxserver:8080/fc"
      - "JOB_NAME=frequent"
      - "HERITRIX_USER=heritrix"
      - "HERITRIX_PASSWORD=test"
    hostname: tasks.heritrix-worker

  #
  hapy:
    build: .
    #image: ukwa/hapy:latest
    ports:
      - 8000:8000
    environment:
      - "HERITRIX_USER=heritrix"
      - "HERITRIX_PASSWORD=test"





